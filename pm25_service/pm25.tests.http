@host = localhost
@port = 8000
@base = http://{{host}}:{{port}}

# ===== Projektweite Defaults =====
@bucket = pm25data
# leerer String, wenn kein Prefix benutzt wird
@prefix = ""

@region = AT
@scenario = ssp585
@quantile = 0.95
@y0 = 2030
@y1 = 2039
# =================================

### Health
GET {{base}}/health
Accept: application/json

### OpenAPI (zur Kontrolle)
GET {{base}}/openapi.json
Accept: application/json

### Reindex (scan MinIO -> schreibe Cache)
POST {{base}}/api/pm25/files/reindex?bucket={{bucket}}
Accept: application/json

### Threshold (z. B. 95%-Perzentil)
GET {{base}}/api/pm25/threshold?scenario={{scenario}}&quantile={{quantile}}
Accept: application/json

### Region-Wert (einfacher Check)
GET {{base}}/api/pm25/region?region={{region}}&scenario={{scenario}}
Accept: application/json

### Region-Schock (Basisjahr 2015, Mittelwert Ã¼ber [y0..y1])
GET {{base}}/api/pm25/region_shock?region={{region}}&scenario={{scenario}}&start_year={{y0}}&end_year={{y1}}
Accept: application/json

### Beispiel: anderes Szenario/Fenster
GET {{base}}/api/pm25/region_shock?region=DE&scenario=ssp126&start_year=20

### Zellweise Threshold Map (historical 1850-1900)
GET {{base}}/api/pm25/threshold_map?scenario={{scenario}}&quantile={{quantile}}&basis=historical
Accept: application/json

### Zellweise Threshold Map (ensemble2015)
GET {{base}}/api/pm25/threshold_map?scenario={{scenario}}&quantile={{quantile}}&basis=ensemble2015
Accept: application/json


### Mini-Tests
### 1) Reindex (falls noch nicht)
POST http://localhost:8000/api/pm25/files/reindex

### 2) Threshold-Map (einmalig je Szenario/Quantil; baut baseline+q)
GET  http://localhost:8000/api/pm25/threshold_map?scenario=ssp585&quantile=0.95&basis=ensemble2015

### 3) Pineau-konformer Schock (baseline)
GET  http://localhost:8000/api/pm25/region_shock?region=AT&scenario=ssp585&start_year=2030&end_year=2039&mode=baseline&agg=median&stat=ratio

### 4) Exceedance-Schock (Perzentil)
GET  http://localhost:8000/api/pm25/region_shock?region=AT&scenario=ssp585&start_year=2030&end_year=2039&mode=percentile&q=0.95&basis=ensemble2015&agg=median&stat=ratio

### Mask and geojson auto-download
POST http://localhost:8000/api/pm25/country_mask/ensure
### sus
GET  http://localhost:8000/api/pm25/country_mask/info

